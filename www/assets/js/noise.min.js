function renderReply(e,a){a=void 0!==typeof a?a:!1,$(".sort").show(),$(".commentArea ul#commentList").append(makeReplyDom(e,a))}function renderReplyForPost(e,a){$('li[reply-id="'+a+'"]').append(makeReplyDom(e,!1))}function makeReplyDom(e,a){counter++,a=void 0!==typeof a?a:!1;var s=e.created_by,t=e.upvotes.length-e.downvotes.length,i=$('<li>             <div class="post" id="'+e.id+'">                 <div class="avatarArea">                     <a href="#">                         <div class="avatar" style="background: url('+urlBase+"assets/img/"+s.avatar+') center no-repeat; background-size: cover;"></div>                     </a>                 </div>                 <div class="content">                     <ul class="meta">                         <li>                             <a class="username" href="">'+s.username+'</a>                         </li>                         <li>                             <i class="sparator xn xn-circle"></i>                         </li>                         <li>                             <span class="time">1 months ago</span>                         </li>                     </ul>                     <p>                         '+e.content+'                     </p>                     <ul class="reply">                         <li class="voteup forVote" vote-for="'+e.id+'" vote-type="1">                             <a href="#"><i class="xn xn-thumbs-o-up"></i></a>                         </li>                         <li class="votedown forVote" vote-for="'+e.id+'" vote-type="2">                             <a href="#"><i class="xn xn-thumbs-o-down"></i></a>                         </li>                         <li>                             <i class="sparator xn xn-circle"></i>                         </li>                         <li>                             <a href="#" class="replyButton">Reply</a>                         </li>                     </ul>                 </div>                 <div class="replyComment animated fadeIn">                     <div class="avatarArea">                         <div class="avatar" style="background: url('+urlBase+"assets/img/"+userLogin.avatar+') center no-repeat; background-size: cover;"></div>                     </div>                     <div class="commentBox">                         <form class="replyForPost" post-id="'+e.id+'">                             <textarea name="" id="" cols="30" rows="10" placeholder="Reply a message"></textarea>                             <div class="postArea row">                                 <a href="#"><i class="xn xn-image"></i></a>                                 <input type="submit" class="button solid pull-right" value="Post">                             </div>                         </form>                     </div>                 </div>             </div>         </li>');if(0!==t){var r=$('<span class="badgeVote animated bounceIn">             <i>'+t+"</i>         </span>");0>t&&r.addClass("negative"),$(i.find(".avatarArea a")[0]).append(r)}if($.each(e.upvotes,function(e,a){a.created_by.username===userLogin.username&&i.find(".reply .voteup a").addClass("voted animated flash")}),$.each(e.downvotes,function(e,a){a.created_by.username===userLogin.username&&i.find(".reply .votedown a").addClass("voted animated flash")}),a){var l=e.reply_for_thread_id?"":"nested";i.html('<ul class="'+l+'"><li class="postPoint" reply-id="'+e.id+'">'+i.html()+"</li></ul>"),$.each(e.replies,function(a,s){var t=s.replies.length>0?!0:!1;$(i.find('li[reply-id="'+e.id+'"]')[0]).append(makeReplyDom(s,t))})}else i.html('<ul class="nested postPoint" reply-id="'+e.id+'">'+i.html()+"</ul>");return $(".headerArea .count").text(counter),i}function openWindow(e,a){var s=760,t=480,i=parseInt(screen.availWidth/2-s/2),r=parseInt(screen.availHeight/2-t/2),l="width="+s+",height="+t+",status,resizable,left="+i+",top="+r+"screenX="+i+",screenY="+r;myWindow=window.open(e,a,l)}var userLogin={},counter=0,userId="54c84445c8577abd078b4567";$(".noiseReplyBox").attr("thread-id",threadId),$(".sort").hide(),$.getJSON(urlSite+"api/user/"+userId,function(e){userLogin=e,$.getJSON(urlSite+"api/thread/"+threadId,function(e){var a=e.replies;$.each(a,function(e,a){var s=a.replies.length>0?!0:!1;renderReply(a,s)})})});
